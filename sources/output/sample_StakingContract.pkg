{"name":"StakingContract","code":"te6ccgECGwEABVkAART/APSkE/S88sgLAQIBYgIDAvTQAdDTAwFxsKMB+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiFRQUwNvBPhhAvhi2zxVFNs88uCCyPhDAcx/AcoAVUBQRcv/Esv/y//IWCDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhL0AMkBzMntVBgEAgFYDA0CZAGSMH/gcCHXScIflTAg1wsf3iCCEIRzFuO64wIgghA2ZiiVuuMCwAAB10nBIbCRf+BwBQYD2DDTHwGCEIRzFuO68uCB+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAHTH9P/gQEB1wBVMGwU+EFvJBAjXwOBZL5RUccFFfL0EHgjEHkQaRBZEElZ2zxwgEJwiBBJFEMwbW3bPFUDfwcICgHoMNMfAYIQNmYolbry4IHTHwEx+EFvJBAjXwMigQEBI1n0DW+hkjBt3yBukjBtjjHQ+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAGBAQHXAIEBAdcAVSBsE28D4iBu8tCAbyNbgWS+AscF8vTbPH8JAMSCAJpuUyi+k1Mnu5Fw4vL0Iaj4I1igVCIgWYEBAQPIVSBaINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEoEBAc8AgQEBzwDJEDRBQCBulTBZ9FowlEEz9BXiUFWgBAAgAAAAAFN0YWtlU3VjY2VzcwLo+CdvEBBGEDVGViXbPBeoghA7msoAqQSBAQFURxdZ9A1voZIwbd8gbpIwbY4x0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgBgQEB1wCBAQHXAFUgbBNvA+IgbvLQgG8jW1AFcn9VIG1tbds8QDQXCgHKyHEBygFQBwHKAHABygJQBSDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFlAD+gJwAcpoI26zkX+TJG6z4pczMwFwAcoA4w0hbrOcfwHKAAEgbvLQgAHMlTFwAcoA4skB+wALAJh/AcoAyHABygBwAcoAJG6znX8BygAEIG7y0IBQBMyWNANwAcoA4iRus51/AcoABCBu8tCAUATMljQDcAHKAOJwAcoAAn8BygACyVjMAgEgDg8CASAREgIRtBKbZ5tnjYowGBAAlbd6ME4LnYerpZXPY9CdhzrJUKNs0E4TusalpWyPlmRadeW/vixHME4ECrgDcAzscpnLB1XI5LZYcE4TsunLVmnZbmdB0s2yjN0UkAACJAIBIBMUAhW3W9tniqCbZ42KcBgZAgFIFRYAdbJu40NWlwZnM6Ly9RbWRoNUZONmJlMXExSDhyYkUzeE1YTmtySFlQOTd5TTVKUzJQempBTEUyQjZCggABCqvu1E0NIAAQIUqWDbPFUE2zxsURgXALSBAQEiAln0DW+hkjBt3yBukjBtjjHQ+kABINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiAGBAQHXAIEBAdcAVSBsE28D4iBu8tCAbyMwghA7msoAMqglqQQB3u1E0NQB+GPSAAGONNP/0//T/9QB0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB9AQwECUQJBAjbBXg+CjXCwqDCbry4In6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAdHbPBoAnIEBASICWfQNb6GSMG3fIG6SMG2OMdD6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAYEBAdcAgQEB1wBVIGwTbwPiIG7y0IBvIwAacIIBUYCCCO1OAFgDbQ==","abi":"{\"name\":\"StakingContract\",\"types\":[{\"name\":\"StateInit\",\"header\":null,\"fields\":[{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}}]},{\"name\":\"Context\",\"header\":null,\"fields\":[{\"name\":\"bounced\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"raw\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false}}]},{\"name\":\"SendParameters\",\"header\":null,\"fields\":[{\"name\":\"bounce\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"to\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"value\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"mode\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"body\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"code\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"data\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}}]},{\"name\":\"CollectionData\",\"header\":null,\"fields\":[{\"name\":\"next_item_index\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"collection_content\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"owner_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"RoyaltyParams\",\"header\":null,\"fields\":[{\"name\":\"numerator\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"denominator\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"GetRoyaltyParams\",\"header\":1765620048,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"ReportRoyaltyParams\",\"header\":2831876269,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"numerator\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}},{\"name\":\"denominator\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":16}},{\"name\":\"destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"Stake\",\"header\":3870301467,\"fields\":[{\"name\":\"duration\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}}]},{\"name\":\"Transfer\",\"header\":1607220500,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"new_owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"response_destination\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"custom_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":true}},{\"name\":\"forward_amount\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":\"coins\"}},{\"name\":\"forward_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"OwnershipAssigned\",\"header\":85167505,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"prev_owner\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"forward_payload\",\"type\":{\"kind\":\"simple\",\"type\":\"slice\",\"optional\":false,\"format\":\"remainder\"}}]},{\"name\":\"Excesses\",\"header\":3576854235,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"GetStaticData\",\"header\":801842850,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}}]},{\"name\":\"ReportStaticData\",\"header\":2339837749,\"fields\":[{\"name\":\"query_id\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":64}},{\"name\":\"index_id\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"collection\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}}]},{\"name\":\"GetNftData\",\"header\":null,\"fields\":[{\"name\":\"is_initialized\",\"type\":{\"kind\":\"simple\",\"type\":\"bool\",\"optional\":false}},{\"name\":\"index\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"collection_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"owner_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"individual_content\",\"type\":{\"kind\":\"simple\",\"type\":\"cell\",\"optional\":false}},{\"name\":\"level\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"StakeNFT\",\"header\":2222135011,\"fields\":[{\"name\":\"sender_nft_item_address\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"nftId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}},{\"name\":\"duration\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":256}},{\"name\":\"level\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"ClaimNFT\",\"header\":912664725,\"fields\":[{\"name\":\"nftId\",\"type\":{\"kind\":\"simple\",\"type\":\"uint\",\"optional\":false,\"format\":32}}]},{\"name\":\"Info\",\"header\":null,\"fields\":[{\"name\":\"sender\",\"type\":{\"kind\":\"simple\",\"type\":\"address\",\"optional\":false}},{\"name\":\"weight\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"unlock_time\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]},{\"name\":\"StakeData\",\"header\":null,\"fields\":[{\"name\":\"totalWeight\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}]}],\"receivers\":[{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"StakeNFT\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"typed\",\"type\":\"ClaimNFT\"}},{\"receiver\":\"internal\",\"message\":{\"kind\":\"empty\"}}],\"getters\":[{\"name\":\"claimable\",\"arguments\":[{\"name\":\"nft_id\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}},{\"name\":\"stake_data\",\"arguments\":[],\"returnType\":{\"kind\":\"simple\",\"type\":\"StakeData\",\"optional\":false}},{\"name\":\"get_user_list\",\"arguments\":[{\"name\":\"_nftID\",\"type\":{\"kind\":\"simple\",\"type\":\"int\",\"optional\":false,\"format\":257}}],\"returnType\":{\"kind\":\"simple\",\"type\":\"Info\",\"optional\":false}}],\"errors\":{\"2\":{\"message\":\"Stack undeflow\"},\"3\":{\"message\":\"Stack overflow\"},\"4\":{\"message\":\"Integer overflow\"},\"5\":{\"message\":\"Integer out of expected range\"},\"6\":{\"message\":\"Invalid opcode\"},\"7\":{\"message\":\"Type check error\"},\"8\":{\"message\":\"Cell overflow\"},\"9\":{\"message\":\"Cell underflow\"},\"10\":{\"message\":\"Dictionary error\"},\"13\":{\"message\":\"Out of gas error\"},\"32\":{\"message\":\"Method ID not found\"},\"34\":{\"message\":\"Action is invalid or not supported\"},\"37\":{\"message\":\"Not enough TON\"},\"38\":{\"message\":\"Not enough extra-currencies\"},\"128\":{\"message\":\"Null reference exception\"},\"129\":{\"message\":\"Invalid serialization prefix\"},\"130\":{\"message\":\"Invalid incoming message\"},\"131\":{\"message\":\"Constraints error\"},\"132\":{\"message\":\"Access denied\"},\"133\":{\"message\":\"Contract stopped\"},\"134\":{\"message\":\"Invalid argument\"},\"135\":{\"message\":\"Code of a contract was not found\"},\"136\":{\"message\":\"Invalid address\"},\"137\":{\"message\":\"Masterchain support is not enabled for this contract\"},\"25790\":{\"message\":\"Not from NFT Item Address\"},\"39534\":{\"message\":\"NFTStaking: invalid duration\"},\"43283\":{\"message\":\"in staking\"},\"49280\":{\"message\":\"not owner\"},\"62742\":{\"message\":\"non-sequential NFTs\"}},\"interfaces\":[\"org.ton.introspection.v0\",\"org.ton.abi.ipfs.v0\",\"org.ton.deploy.lazy.v0\",\"org.ton.chain.workchain.v0\"]}","init":{"kind":"direct","args":[{"name":"_nft","type":{"kind":"simple","type":"address","optional":false}}],"prefix":{"bits":1,"value":0},"deployment":{"kind":"system-cell","system":"te6cckECHQEABWMAAQHAAQEFoCuZAgEU/wD0pBP0vPLICwMCAWIRBAIBWA0FAgEgCAYCFbdb22eKoJtnjYpwGwcAnIEBASICWfQNb6GSMG3fIG6SMG2OMdD6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAYEBAdcAgQEB1wBVIGwTbwPiIG7y0IBvIwIBIAoJAHWybuNDVpcGZzOi8vUW1kaDVGTjZiZTFxMUg4cmJFM3hNWE5rckhZUDk3eU01SlMyUHpqQUxFMkI2QoIAIBSAwLAhSpYNs8VQTbPGxRGxUAEKq+7UTQ0gABAgEgDw4Albd6ME4LnYerpZXPY9CdhzrJUKNs0E4TusalpWyPlmRadeW/vixHME4ECrgDcAzscpnLB1XI5LZYcE4TsunLVmnZbmdB0s2yjN0UkAIRtBKbZ5tnjYowGxAAAiQC9NAB0NMDAXGwowH6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIVFBTA28E+GEC+GLbPFUU2zzy4ILI+EMBzH8BygBVQFBFy/8Sy//L/8hYINdJgQELuvLgiCDXCwoggQT/uvLQiYMJuvLgiM8WEvQAyQHMye1UGxICZAGSMH/gcCHXScIflTAg1wsf3iCCEIRzFuO64wIgghA2ZiiVuuMCwAAB10nBIbCRf+BwFhMB6DDTHwGCEDZmKJW68uCB0x8BMfhBbyQQI18DIoEBASNZ9A1voZIwbd8gbpIwbY4x0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgBgQEB1wCBAQHXAFUgbBNvA+IgbvLQgG8jW4FkvgLHBfL02zx/FALo+CdvEBBGEDVGViXbPBeoghA7msoAqQSBAQFURxdZ9A1voZIwbd8gbpIwbY4x0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgBgQEB1wCBAQHXAFUgbBNvA+IgbvLQgG8jW1AFcn9VIG1tbds8QDQVFwC0gQEBIgJZ9A1voZIwbd8gbpIwbY4x0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgBgQEB1wCBAQHXAFUgbBNvA+IgbvLQgG8jMIIQO5rKADKoJakEA9gw0x8BghCEcxbjuvLggfpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB0x/T/4EBAdcAVTBsFPhBbyQQI18DgWS+UVHHBRXy9BB4IxB5EGkQWRBJWds8cIBCcIgQSRRDMG1t2zxVA38aGRcByshxAcoBUAcBygBwAcoCUAUg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIzxZQA/oCcAHKaCNus5F/kyRus+KXMzMBcAHKAOMNIW6znH8BygABIG7y0IABzJUxcAHKAOLJAfsAGACYfwHKAMhwAcoAcAHKACRus51/AcoABCBu8tCAUATMljQDcAHKAOIkbrOdfwHKAAQgbvLQgFAEzJY0A3ABygDicAHKAAJ/AcoAAslYzAAgAAAAAFN0YWtlU3VjY2VzcwDEggCablMovpNTJ7uRcOLy9CGo+CNYoFQiIFmBAQEDyFUgWiDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IjPFhKBAQHPAIEBAc8AyRA0QUAgbpUwWfRaMJRBM/QV4lBVoAQB3u1E0NQB+GPSAAGONNP/0//T/9QB0PpAASDXSYEBC7ry4Igg1wsKIIEE/7ry0ImDCbry4IgB9AQwECUQJBAjbBXg+CjXCwqDCbry4In6QAEg10mBAQu68uCIINcLCiCBBP+68tCJgwm68uCIAdHbPBwAGnCCAVGAggjtTgBYA21XnZc0"}},"sources":{"sources/contract.tact":"CnN0cnVjdCBDb2xsZWN0aW9uRGF0YSB7CiAgICBuZXh0X2l0ZW1faW5kZXg6IEludDsKICAgIGNvbGxlY3Rpb25fY29udGVudDogQ2VsbDsKICAgIG93bmVyX2FkZHJlc3M6IEFkZHJlc3M7Cn0Kc3RydWN0IFJveWFsdHlQYXJhbXMgewogICAgbnVtZXJhdG9yOiBJbnQ7CiAgICBkZW5vbWluYXRvcjogSW50OwogICAgZGVzdGluYXRpb246IEFkZHJlc3M7Cn0KCm1lc3NhZ2UoMHg2OTNkMzk1MCkgR2V0Um95YWx0eVBhcmFtcyB7CiAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKfQoKbWVzc2FnZSgweGE4Y2IwMGFkKSBSZXBvcnRSb3lhbHR5UGFyYW1zIHsKICAgIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwogICAgbnVtZXJhdG9yOiAgSW50IGFzIHVpbnQxNjsKICAgIGRlbm9taW5hdG9yOiBJbnQgYXMgdWludDE2OwogICAgZGVzdGluYXRpb246IEFkZHJlc3M7Cn0KCm1lc3NhZ2UgU3Rha2UgewogICAgZHVyYXRpb246IEludCBhcyB1aW50MjU2Owp9Cgpjb250cmFjdCBOZnRDb2xsZWN0aW9uIHsKICAgIGNvbnN0IG1pblRvbnNGb3JTdG9yYWdlOiBJbnQgPSB0b24oIjAuMDMiKTsKICAgIGNvbnN0IGdhc0NvbnN1bXB0aW9uOiBJbnQgPSB0b24oIjAuMDMiKTsKICAgIG5leHRfaXRlbV9pbmRleDogSW50IGFzIHVpbnQzMiA9IDA7CiAgICBvd25lcl9hZGRyZXNzOiBBZGRyZXNzOwogICAgcm95YWx0eV9wYXJhbXM6IFJveWFsdHlQYXJhbXM7ICAgICAgICAgICAgICAgICAgICAgIAogICAgY29sbGVjdGlvbl9jb250ZW50OiBDZWxsOyAgIAoKICAgIGluaXQob3duZXJfYWRkcmVzczogQWRkcmVzcywgY29sbGVjdGlvbl9jb250ZW50OiBDZWxsLCByb3lhbHR5X3BhcmFtczogUm95YWx0eVBhcmFtcyl7CiAgICAgICAgc2VsZi5vd25lcl9hZGRyZXNzID0gb3duZXJfYWRkcmVzczsKICAgICAgICBzZWxmLmNvbGxlY3Rpb25fY29udGVudCA9IGNvbGxlY3Rpb25fY29udGVudDsgCiAgICAgICAgc2VsZi5yb3lhbHR5X3BhcmFtcyA9IHJveWFsdHlfcGFyYW1zOwogICAgfQoKICAgIHJlY2VpdmUoIk1pbnQiKXsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOyAvLyBnZXQgc2VuZGVyIEluZm8KICAgICAgICBsZXQgbXNnVmFsdWU6IEludCA9IGN0eC52YWx1ZTsKICAgICAgICBsZXQgdG9uQmFsYW5jZUJlZm9yZU1zZzogSW50ID0gbXlCYWxhbmNlKCkgLSBtc2dWYWx1ZTsKICAgICAgICBsZXQgc3RvcmFnZUZlZTogSW50ID0gc2VsZi5taW5Ub25zRm9yU3RvcmFnZSAtIG1pbih0b25CYWxhbmNlQmVmb3JlTXNnLCBzZWxmLm1pblRvbnNGb3JTdG9yYWdlKTsKICAgICAgICBtc2dWYWx1ZSA9IG1zZ1ZhbHVlIC0gKHN0b3JhZ2VGZWUgKyBzZWxmLmdhc0NvbnN1bXB0aW9uKTsKCiAgICAgICAgc2VsZi5taW50KGN0eC5zZW5kZXIsIG1zZ1ZhbHVlKTsKICAgIH0KICAgIC8vID09PT09IFByaXZhdGUgTWV0aG9kcyA9PT09PSAvLwogICAgZnVuIG1pbnQoc2VuZGVyOiBBZGRyZXNzLCBtc2dWYWx1ZTogSW50KSB7CiAgICAgICAgLy8gVE9ETzogaWYgKGlzX2luaXRpYWxpemVkID09IGZhbHNlKSB7IC8vIG5leHRfaXRlbV9pbmRleCA9PSAtMSB9CiAgICAgICAgcmVxdWlyZShzZWxmLm5leHRfaXRlbV9pbmRleCA+PSAwLCAibm9uLXNlcXVlbnRpYWwgTkZUcyIpOwoKICAgICAgICBsZXQgbmZ0X2luaXQ6IFN0YXRlSW5pdCA9IHNlbGYuZ2V0TmZ0SXRlbUluaXQoc2VsZi5uZXh0X2l0ZW1faW5kZXgpOwogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICB0bzogY29udHJhY3RBZGRyZXNzKG5mdF9pbml0KSwgCiAgICAgICAgICAgICAgICB2YWx1ZTogbXNnVmFsdWUsIAogICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSwKICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMsCiAgICAgICAgICAgICAgICBib2R5OiBUcmFuc2ZlcnsKICAgICAgICAgICAgICAgICAgICBxdWVyeV9pZDogMCwKICAgICAgICAgICAgICAgICAgICBuZXdfb3duZXI6IHNlbmRlciwKICAgICAgICAgICAgICAgICAgICByZXNwb25zZV9kZXN0aW5hdGlvbjogc2VsZi5vd25lcl9hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIGN1c3RvbV9wYXlsb2FkOiBlbXB0eUNlbGwoKSwKICAgICAgICAgICAgICAgICAgICBmb3J3YXJkX2Ftb3VudDogMCwKICAgICAgICAgICAgICAgICAgICBmb3J3YXJkX3BheWxvYWQ6IGVtcHR5U2xpY2UoKQogICAgICAgICAgICAgICAgfS50b0NlbGwoKSwKICAgICAgICAgICAgICAgIGNvZGU6IG5mdF9pbml0LmNvZGUsCiAgICAgICAgICAgICAgICBkYXRhOiBuZnRfaW5pdC5kYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgIHNlbGYubmV4dF9pdGVtX2luZGV4ID0gc2VsZi5uZXh0X2l0ZW1faW5kZXggKyAxOwogICAgfQoKICAgIHJlY2VpdmUobXNnOiBHZXRSb3lhbHR5UGFyYW1zKSB7ICAgIC8vIFRPRE86IFRlc3QgUm95YWx0aWVzIEZlZQogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICB0bzogbXlBZGRyZXNzKCksCiAgICAgICAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgICAgICAgIG1vZGU6IDY0LCAKICAgICAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgICAgICAgICBib2R5OiBSZXBvcnRSb3lhbHR5UGFyYW1zIHsKICAgICAgICAgICAgICAgICAgICBxdWVyeV9pZDogbXNnLnF1ZXJ5X2lkLAogICAgICAgICAgICAgICAgICAgIG51bWVyYXRvcjogIHNlbGYucm95YWx0eV9wYXJhbXMubnVtZXJhdG9yLAogICAgICAgICAgICAgICAgICAgIGRlbm9taW5hdG9yOiBzZWxmLnJveWFsdHlfcGFyYW1zLmRlbm9taW5hdG9yLAogICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBzZWxmLm93bmVyX2FkZHJlc3MKICAgICAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICB9KTsgICAgICAgIAogICAgfQoKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0gR2V0IEZ1bmN0aW9uICAtLS0tLS0tLS0tLS0tLS0tLS0gLy8KICAgIGdldCBmdW4gZ2V0X2NvbGxlY3Rpb25fZGF0YSgpOiBDb2xsZWN0aW9uRGF0YXsgICAgIAogICAgICAgIGxldCBiOiBTdHJpbmdCdWlsZGVyID0gYmVnaW5TdHJpbmcoKTsKICAgICAgICBsZXQgY29sbGVjdGlvbkRhdGFTdHJpbmc6IFN0cmluZyA9IHNlbGYuY29sbGVjdGlvbl9jb250ZW50LmFzU2xpY2UoKS5hc1N0cmluZygpOwogICAgICAgIGIuYXBwZW5kKGNvbGxlY3Rpb25EYXRhU3RyaW5nKTsKICAgICAgICBiLmFwcGVuZCgibWV0YS5qc29uIik7IC8vIFlvdSBjYW4gY2hhbmdlZCB0aGlzIHlvdXIgc2VsZi4KCiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25EYXRhewogICAgICAgICAgICBuZXh0X2l0ZW1faW5kZXg6IHNlbGYubmV4dF9pdGVtX2luZGV4LCAKICAgICAgICAgICAgY29sbGVjdGlvbl9jb250ZW50OiBiLnRvQ2VsbCgpLCAKICAgICAgICAgICAgb3duZXJfYWRkcmVzczogc2VsZi5vd25lcl9hZGRyZXNzCiAgICAgICAgfTsKICAgIH0KCiAgICBnZXQgZnVuIGdldF9uZnRfYWRkcmVzc19ieV9pbmRleChpdGVtX2luZGV4OiBJbnQpOiBBZGRyZXNzeyAgICAgIAogICAgICAgIGxldCBpbml0Q29kZTogU3RhdGVJbml0ID0gc2VsZi5nZXROZnRJdGVtSW5pdChpdGVtX2luZGV4KTsKICAgICAgICByZXR1cm4gY29udHJhY3RBZGRyZXNzKGluaXRDb2RlKTsKICAgIH0KCiAgICBnZXQgZnVuIGdldE5mdEl0ZW1Jbml0KGl0ZW1faW5kZXg6IEludCk6IFN0YXRlSW5pdCB7CiAgICAgICAgcmV0dXJuIGluaXRPZiBOZnRJdGVtKG15QWRkcmVzcygpLCBpdGVtX2luZGV4LCBzZWxmLm93bmVyX2FkZHJlc3MsIHNlbGYuY29sbGVjdGlvbl9jb250ZW50KTsKICAgIH0KICAgIAogICAgZ2V0IGZ1biBnZXRfbmZ0X2NvbnRlbnQoaW5kZXg6IEludCwgaW5kaXZpZHVhbF9jb250ZW50OiBDZWxsKTogQ2VsbCB7IAogICAgICAgIGxldCBiOiBTdHJpbmdCdWlsZGVyID0gYmVnaW5TdHJpbmcoKTsKICAgICAgICBsZXQgaWM6IFN0cmluZyA9IGluZGl2aWR1YWxfY29udGVudC5hc1NsaWNlKCkuYXNTdHJpbmcoKTsKICAgICAgICBiLmFwcGVuZChpYyk7CiAgICAgICAgcmV0dXJuIGIudG9DZWxsKCk7CiAgICB9CgogICAgZ2V0IGZ1biByb3lhbHR5X3BhcmFtcygpOiBSb3lhbHR5UGFyYW1zIHsKICAgICAgICByZXR1cm4gc2VsZi5yb3lhbHR5X3BhcmFtczsKICAgIH0KfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwoKY29udHJhY3QgTmZ0SXRlbSB7CiAgICBjb25zdCBtaW5Ub25zRm9yU3RvcmFnZTogSW50ID0gdG9uKCIwLjA1Iik7CiAgICBjb25zdCBnYXNDb25zdW1wdGlvbjogSW50ID0gdG9uKCIwLjA1Iik7CgogICAgY29sbGVjdGlvbl9hZGRyZXNzOiBBZGRyZXNzOwogICAgaXRlbV9pbmRleDogSW50OyAKICAgIG93bmVyOiBBZGRyZXNzOwogICAgaW5kaXZpZHVhbF9jb250ZW50OiBDZWxsOwogICAgaXNfaW5pdGlhbGl6ZWQ6IEJvb2w7CgogICAgbGV2ZWw6IEludCBhcyB1aW50MTYgPSAwOwogICAgaXNfc3Rha2luZzogQm9vbDsKICAgIGluaXQoCiAgICAgICAgY29sbGVjdGlvbl9hZGRyZXNzOiBBZGRyZXNzLCAKICAgICAgICBpdGVtX2luZGV4OiBJbnQsCiAgICAgICAgb3duZXI6IEFkZHJlc3MsIAogICAgICAgIGluZGl2aWR1YWxfY29udGVudDogQ2VsbAogICAgKXsKICAgICAgICBzZWxmLmNvbGxlY3Rpb25fYWRkcmVzcyA9IGNvbGxlY3Rpb25fYWRkcmVzczsKICAgICAgICBzZWxmLml0ZW1faW5kZXggPSBpdGVtX2luZGV4OwogICAgICAgIHNlbGYub3duZXIgPSBvd25lcjsKICAgICAgICBzZWxmLmluZGl2aWR1YWxfY29udGVudCA9IGluZGl2aWR1YWxfY29udGVudDsKICAgICAgICBzZWxmLmlzX2luaXRpYWxpemVkID0gZmFsc2U7CiAgICAgICAgc2VsZi5pc19zdGFraW5nID0gZmFsc2U7CiAgICB9CgogICAgcmVjZWl2ZShtc2c6IFRyYW5zZmVyKXsKICAgICAgICBsZXQgY3R4OiBDb250ZXh0ID0gY29udGV4dCgpOwogICAgICAgIGxldCBtc2dWYWx1ZTogSW50ID0gY3R4LnZhbHVlOyAvLyBDaGVjayB0aGUgZ2FzQ29zdCBmb3Igc3RvcmFnZQogICAgICAgIGxldCB0b25CYWxhbmNlQmVmb3JlTXNnOiBJbnQgPSBteUJhbGFuY2UoKSAtIG1zZ1ZhbHVlOwogICAgICAgIGxldCBzdG9yYWdlRmVlOiBJbnQgPSBzZWxmLm1pblRvbnNGb3JTdG9yYWdlIC0gbWluKHRvbkJhbGFuY2VCZWZvcmVNc2csIHNlbGYubWluVG9uc0ZvclN0b3JhZ2UpOwogICAgICAgIG1zZ1ZhbHVlID0gbXNnVmFsdWUgLSAoc3RvcmFnZUZlZSArIHNlbGYuZ2FzQ29uc3VtcHRpb24pOwoKICAgICAgICByZXF1aXJlKGN0eC5zZW5kZXIgPT0gc2VsZi5jb2xsZWN0aW9uX2FkZHJlc3MsICJub3Qgb3duZXIiKTsKICAgICAgICByZXF1aXJlKCFzZWxmLmlzX3N0YWtpbmcsICJpbiBzdGFraW5nIik7CgogICAgICAgIGlmIChzZWxmLmlzX2luaXRpYWxpemVkID09IGZhbHNlKSB7ICAvLyBJbml0aWFsIFRyYW5zZmVyLCBha2EgTWludGluZy4KICAgICAgICAgICAgc2VsZi5pc19pbml0aWFsaXplZCA9IHRydWU7CiAgICAgICAgICAgIHNlbGYub3duZXIgPSBtc2cubmV3X293bmVyOwoKICAgICAgICAgICAgc2VsZi5sZXZlbCA9IHJhbmRvbSgxLCAxMDEpOwogICAgICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICAgICAgdG86IG1zZy5yZXNwb25zZV9kZXN0aW5hdGlvbiwKICAgICAgICAgICAgICAgIHZhbHVlOiBtc2dWYWx1ZSwKICAgICAgICAgICAgICAgIG1vZGU6ICBTZW5kSWdub3JlRXJyb3JzLAogICAgICAgICAgICAgICAgYm9keTogRXhjZXNzZXMgeyAvLzB4ZDUzMjc2ZGIKICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlfaWQ6IG1zZy5xdWVyeV9pZAogICAgICAgICAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChtc2cuZm9yd2FyZF9hbW91bnQgPiAwKSB7IC8vICBtc2c6IGZvcndhcmRfYW1vdW50ID0+IHRoZSBhbW91bnQgb2YgbmFuby10b25zIHRvIGJlIHNlbnQgdG8gdGhlIG5ldyBvd25lci4KICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgICAgICAgICAgdG86IG1zZy5uZXdfb3duZXIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1zZy5mb3J3YXJkX2Ftb3VudCwKICAgICAgICAgICAgICAgICAgICBtb2RlOiBTZW5kSWdub3JlRXJyb3JzLCAKICAgICAgICAgICAgICAgICAgICBib3VuY2U6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGJvZHk6IE93bmVyc2hpcEFzc2lnbmVkewogICAgICAgICAgICAgICAgICAgICAgICBxdWVyeV9pZDogbXNnLnF1ZXJ5X2lkLAogICAgICAgICAgICAgICAgICAgICAgICBwcmV2X293bmVyOiAgc2VsZi5vd25lciwKICAgICAgICAgICAgICAgICAgICAgICAgZm9yd2FyZF9wYXlsb2FkOiBtc2cuZm9yd2FyZF9wYXlsb2FkCiAgICAgICAgICAgICAgICAgICAgfS50b0NlbGwoKQogICAgICAgICAgICAgICAgfSk7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIG1zZ1ZhbHVlID0gbXNnVmFsdWUgLSBjdHgucmVhZEZvcndhcmRGZWUoKTsgCiAgICAgICAgICAgIGlmIChtc2cucmVzcG9uc2VfZGVzdGluYXRpb24gIT0gbnVsbCkgeyAKICAgICAgICAgICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7IC8vIDB4ZDUzMjc2ZGIKICAgICAgICAgICAgICAgICAgICB0bzogbXNnLnJlc3BvbnNlX2Rlc3RpbmF0aW9uLAogICAgICAgICAgICAgICAgICAgIG1vZGU6IFNlbmRJZ25vcmVFcnJvcnMsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1zZ1ZhbHVlLAogICAgICAgICAgICAgICAgICAgIGJvZHk6IEV4Y2Vzc2VzIHsKICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlfaWQ6IG1zZy5xdWVyeV9pZAogICAgICAgICAgICAgICAgICAgIH0udG9DZWxsKCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2VsZi5vd25lciA9IG1zZy5uZXdfb3duZXI7IC8vIGNoYW5nZSBjdXJyZW50IG93bmVyIHRvIHRoZSBuZXdfb3duZXIKICAgICAgICAgICAgfSAKICAgICAgICB9CiAgICB9CiAgICAKICAgIHJlY2VpdmUobXNnOiBHZXRTdGF0aWNEYXRhKXsgCiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzIHsKICAgICAgICAgICAgdG86IGN0eC5zZW5kZXIsCiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBtb2RlOiA2NCwgIC8vIChyZXR1cm4gbXNnIGFtb3VudCBleGNlcHQgZ2FzIGZlZXMpIAogICAgICAgICAgICBib3VuY2U6IHRydWUsCiAgICAgICAgICAgIGJvZHk6IFJlcG9ydFN0YXRpY0RhdGF7CiAgICAgICAgICAgICAgICBxdWVyeV9pZDogbXNnLnF1ZXJ5X2lkLAogICAgICAgICAgICAgICAgaW5kZXhfaWQ6IHNlbGYuaXRlbV9pbmRleCwKICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IHNlbGYub3duZXIKICAgICAgICAgICAgfS50b0NlbGwoKQogICAgICAgIH0pOwogICAgfQoKICAgIHJlY2VpdmUobXNnOiBTdGFrZSkgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgcmVxdWlyZShjdHguc2VuZGVyID09IHNlbGYub3duZXIsICJub3Qgb3duZXIiKTsKCiAgICAgICAgaWYgKCFzZWxmLmlzX3N0YWtpbmcpIHsKICAgICAgICAgICAgc2VsZi5pc19zdGFraW5nID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGxldCBpbml0X2NvZGU6IFN0YXRlSW5pdCA9IGluaXRPZiBTdGFraW5nQ29udHJhY3Qoc2VsZi5jb2xsZWN0aW9uX2FkZHJlc3MpOwogICAgICAgIHNlbmQoU2VuZFBhcmFtZXRlcnN7CiAgICAgICAgICAgIHRvOiBjb250cmFjdEFkZHJlc3MoaW5pdF9jb2RlKSwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6ICBTZW5kSWdub3JlRXJyb3JzICsgU2VuZFJlbWFpbmluZ1ZhbHVlLAogICAgICAgICAgICBjb2RlOiBpbml0X2NvZGUuY29kZSwgCiAgICAgICAgICAgIGRhdGE6IGluaXRfY29kZS5kYXRhLAogICAgICAgICAgICBib2R5OiBTdGFrZU5GVCB7CiAgICAgICAgICAgICAgICBzZW5kZXJfbmZ0X2l0ZW1fYWRkcmVzczogbXlBZGRyZXNzKCksCiAgICAgICAgICAgICAgICBuZnRJZDogc2VsZi5pdGVtX2luZGV4LAogICAgICAgICAgICAgICAgZHVyYXRpb246IG1zZy5kdXJhdGlvbiwKICAgICAgICAgICAgICAgIGxldmVsOiBzZWxmLmxldmVsCiAgICAgICAgICAgICAgICB9LnRvQ2VsbCgpCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIHJlY2VpdmUoIkNsYWltIikgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgcmVxdWlyZShjdHguc2VuZGVyID09IHNlbGYub3duZXIsICJub3Qgb3duZXIiKTsKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICB0bzogc2VsZi5nZXRfc3Rha2luZ19jb250cmFjdF9hZGRyZXNzKCksCiAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICBtb2RlOiAgU2VuZElnbm9yZUVycm9ycyArIFNlbmRSZW1haW5pbmdWYWx1ZSwKICAgICAgICAgICAgYm9keTogQ2xhaW1ORlQgewogICAgICAgICAgICAgICAgbmZ0SWQ6IHNlbGYuaXRlbV9pbmRleAogICAgICAgICAgICAgICAgfS50b0NlbGwoKQogICAgICAgICAgICB9KTsKICAgIH0KCiAgICByZWNlaXZlKG1zZzogU2xpY2UpIHsKICAgICAgICAvLyBETyBOT1RISU5HCiAgICB9CgogICAgZ2V0IGZ1biBnZXRfc3Rha2luZ19jb250cmFjdF9hZGRyZXNzKCk6IEFkZHJlc3MgewogICAgICAgIGxldCBpbml0Q29kZTogU3RhdGVJbml0ID0gaW5pdE9mIFN0YWtpbmdDb250cmFjdChzZWxmLmNvbGxlY3Rpb25fYWRkcmVzcyk7CiAgICAgICAgcmV0dXJuIGNvbnRyYWN0QWRkcmVzcyhpbml0Q29kZSk7CiAgICB9CgogICAgZ2V0IGZ1biBnZXRfbmZ0X2xldmVsKCk6IEludCB7CiAgICAgICAgcmV0dXJuIHNlbGYubGV2ZWw7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tIEdldCBGdW5jdGlvbiAgLS0tLS0tLS0tIC8vCiAgICBnZXQgZnVuIGdldF9uZnRfZGF0YSgpOiBHZXROZnREYXRhIHsKICAgICAgICBsZXQgYjogU3RyaW5nQnVpbGRlciA9IGJlZ2luU3RyaW5nKCk7CiAgICAgICAgbGV0IGNvbGxlY3Rpb25EYXRhOiBTdHJpbmcgPSBzZWxmLmluZGl2aWR1YWxfY29udGVudC5hc1NsaWNlKCkuYXNTdHJpbmcoKTsKICAgICAgICBiLmFwcGVuZChjb2xsZWN0aW9uRGF0YSk7CiAgICAgICAgYi5hcHBlbmQoc2VsZi5pdGVtX2luZGV4LnRvU3RyaW5nKCkpOwogICAgICAgIGIuYXBwZW5kKCIuanNvbiIpOwoKICAgICAgICByZXR1cm4gR2V0TmZ0RGF0YSB7CiAgICAgICAgICAgIGlzX2luaXRpYWxpemVkOiBzZWxmLmlzX2luaXRpYWxpemVkLCAKICAgICAgICAgICAgaW5kZXg6IHNlbGYuaXRlbV9pbmRleCwgCiAgICAgICAgICAgIGNvbGxlY3Rpb25fYWRkcmVzczogc2VsZi5jb2xsZWN0aW9uX2FkZHJlc3MsIAogICAgICAgICAgICBvd25lcl9hZGRyZXNzOiBzZWxmLm93bmVyLAogICAgICAgICAgICBpbmRpdmlkdWFsX2NvbnRlbnQ6IGIudG9DZWxsKCksCiAgICAgICAgICAgIGxldmVsOiBzZWxmLmxldmVsCiAgICAgICAgfTsKICAgIH0KfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwovLyBbQ29sbGVjdGlvbiBDb250cmFjdF0gLT4gVHJhbnNmZXIgLT4gT3duZXJzaGlwQXNzaWduZWQgLT4gTkZURXhjZXNzZXMKbWVzc2FnZSgweDVmY2MzZDE0KSBUcmFuc2ZlciB7IAogICAgcXVlcnlfaWQ6IEludCBhcyB1aW50NjQ7ICAgICAgICAgICAgCiAgICBuZXdfb3duZXI6IEFkZHJlc3M7IAogICAgcmVzcG9uc2VfZGVzdGluYXRpb246IEFkZHJlc3M7IAogICAgY3VzdG9tX3BheWxvYWQ6IENlbGw/OyAKICAgIGZvcndhcmRfYW1vdW50OiBJbnQgYXMgY29pbnM7IAogICAgZm9yd2FyZF9wYXlsb2FkOiBTbGljZSBhcyByZW1haW5pbmc7IAp9Cm1lc3NhZ2UoMHgwNTEzOGQ5MSkgT3duZXJzaGlwQXNzaWduZWR7CiAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKICAgIHByZXZfb3duZXI6IEFkZHJlc3M7CiAgICBmb3J3YXJkX3BheWxvYWQ6IFNsaWNlIGFzIHJlbWFpbmluZzsgCn0KbWVzc2FnZSgweGQ1MzI3NmRiKSBFeGNlc3NlcyB7CiAgICBxdWVyeV9pZDogSW50IGFzIHVpbnQ2NDsKfQptZXNzYWdlKDB4MmZjYjI2YTIpIEdldFN0YXRpY0RhdGEgeyAKICAgIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0Owp9Cm1lc3NhZ2UoMHg4Yjc3MTczNSkgUmVwb3J0U3RhdGljRGF0YXsKICAgIHF1ZXJ5X2lkOiBJbnQgYXMgdWludDY0OwogICAgaW5kZXhfaWQ6IEludDsKICAgIGNvbGxlY3Rpb246IEFkZHJlc3M7Cn0KLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ3VzdG9taXplZCBNZXNzYWdlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vCnN0cnVjdCBHZXROZnREYXRhIHsgCiAgICBpc19pbml0aWFsaXplZDogQm9vbDsKICAgIGluZGV4OiBJbnQ7CiAgICBjb2xsZWN0aW9uX2FkZHJlc3M6IEFkZHJlc3M7IAogICAgb3duZXJfYWRkcmVzczogQWRkcmVzczsKICAgIGluZGl2aWR1YWxfY29udGVudDogQ2VsbDsKICAgIGxldmVsOiBJbnQ7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvLwptZXNzYWdlIFN0YWtlTkZUIHsKICAgIHNlbmRlcl9uZnRfaXRlbV9hZGRyZXNzOiBBZGRyZXNzOyAKICAgIG5mdElkOiBJbnQgYXMgdWludDMyOyAvLyBORlQgSUQKICAgIGR1cmF0aW9uOiBJbnQgYXMgdWludDI1NjsKICAgIGxldmVsOiBJbnQ7Cn0KCm1lc3NhZ2UgQ2xhaW1ORlQgewogICAgbmZ0SWQ6IEludCBhcyB1aW50MzI7IC8vIE5GVCBJRAp9CgpzdHJ1Y3QgSW5mbyB7CiAgICBzZW5kZXI6IEFkZHJlc3M7CiAgICB3ZWlnaHQ6IEludDsKICAgIHVubG9ja190aW1lOiBJbnQ7Cn0KCmNvbnRyYWN0IFN0YWtpbmdDb250cmFjdCB7CiAgICB0b3RhbFdlaWdodDogSW50IGFzIHVpbnQyNTYgPSAwOwogICAgbWluRHVyYXRpb246IEludCBhcyB1aW50MjU2ID0gODY0MDA7CiAgICBtYXhEdXJhdGlvbjogSW50IGFzIHVpbnQyNTYgPSA4NjQwMCAqIDE4MDsKCiAgICBjb2xsZWN0aW9uX2FkZHJlc3M6IEFkZHJlc3M7CiAgICBzdGFrZV9yZWNvcmRzOiBtYXA8SW50LCBJbmZvPjsKCiAgICBpbml0KF9uZnQ6IEFkZHJlc3MpIHsKICAgICAgICBzZWxmLmNvbGxlY3Rpb25fYWRkcmVzcyA9IF9uZnQ7ICAgIAogICAgfQoKICAgIHJlY2VpdmUobXNnOiBTdGFrZU5GVCkgewogICAgICAgIGxldCBjdHg6IENvbnRleHQgPSBjb250ZXh0KCk7CiAgICAgICAgcmVxdWlyZShjdHguc2VuZGVyID09IG1zZy5zZW5kZXJfbmZ0X2l0ZW1fYWRkcmVzcywgIk5vdCBmcm9tIE5GVCBJdGVtIEFkZHJlc3MiKTsKICAgICAgICBzZWxmLnN0YWtlKG1zZy5uZnRJZCwgY3R4LnNlbmRlciwgbXNnLmR1cmF0aW9uLCBtc2cubGV2ZWwpOwoKICAgICAgICBzZW5kKFNlbmRQYXJhbWV0ZXJzewogICAgICAgICAgICB0bzogY3R4LnNlbmRlciwKICAgICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICAgIG1vZGU6IFNlbmRSZW1haW5pbmdWYWx1ZSArIFNlbmRJZ25vcmVFcnJvcnMsCiAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsCiAgICAgICAgICAgIGJvZHk6ICJTdGFrZVN1Y2Nlc3MiLmFzQ29tbWVudCgpCiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuIHN0YWtlKF9uZnRJZDogSW50LCBfc2VuZGVyOiBBZGRyZXNzLCBfZHVyYXRpb246IEludCwgX2xldmVsOiBJbnQpIHsKICAgICAgICByZXF1aXJlKF9kdXJhdGlvbiA+PSBzZWxmLm1pbkR1cmF0aW9uICYmIF9kdXJhdGlvbiA8PSBzZWxmLm1heER1cmF0aW9uLCAiTkZUU3Rha2luZzogaW52YWxpZCBkdXJhdGlvbiIpOwoKICAgICAgICBsZXQgd2VpZ2h0OiBJbnQgPSBfbGV2ZWwgKiBfZHVyYXRpb247CiAgICAgICAgbGV0IHVubG9ja190aW1lOiBJbnQgPSBub3coKSArIF9kdXJhdGlvbjsKICAgICAgICBsZXQgbmV3X2luZm86IEluZm8gPSBJbmZvewogICAgICAgICAgICBzZW5kZXI6IF9zZW5kZXIsIAogICAgICAgICAgICB3ZWlnaHQ6IHdlaWdodCwgCiAgICAgICAgICAgIHVubG9ja190aW1lOiB1bmxvY2tfdGltZQogICAgICAgIH07CgogICAgICAgIHNlbGYuc3Rha2VfcmVjb3Jkcy5zZXQoX25mdElkLCBuZXdfaW5mbyk7CiAgICAgICAgc2VsZi50b3RhbFdlaWdodCA9IHNlbGYudG90YWxXZWlnaHQgKyB3ZWlnaHQ7CiAgICB9CgogICAgcmVjZWl2ZShtc2c6IENsYWltTkZUKSB7CiAgICAgICAgbGV0IGN0eDogQ29udGV4dCA9IGNvbnRleHQoKTsKICAgICAgICBsZXQgSW5mbzogSW5mbyA9IHNlbGYuc3Rha2VfcmVjb3Jkcy5nZXQobXNnLm5mdElkKSEhOwogICAgICAgIHJlcXVpcmUoY3R4LnNlbmRlciA9PSBJbmZvLnNlbmRlciwgIk5vdCBmcm9tIE5GVCBJdGVtIEFkZHJlc3MiKTsKCiAgICAgICAgLy8gVE9ETzogQ29vbERvd24gVGltZQogICAgICAgIHNlbGYuY2xhaW0obXNnLm5mdElkKTsKICAgIH0KCiAgICBmdW4gY2xhaW0oX25mdElkOiBJbnQpIHsKICAgICAgICBsZXQgdG9rZW46IEludCA9IG15QmFsYW5jZSgpICogc2VsZi5jbGFpbWFibGUoX25mdElkKSAvIHBvdygxMCwgOSk7CiAgICAgICAgbGV0IHRlbXA6IEluZm8gPSBzZWxmLnN0YWtlX3JlY29yZHMuZ2V0KF9uZnRJZCkhITsKCiAgICAgICAgc2VuZChTZW5kUGFyYW1ldGVyc3sKICAgICAgICAgICAgdG86IHRlbXAuc2VuZGVyLAogICAgICAgICAgICB2YWx1ZTogdG9rZW4sCiAgICAgICAgICAgIG1vZGU6ICBTZW5kSWdub3JlRXJyb3JzCiAgICAgICAgfSk7CiAgICB9CgogICAgZ2V0IGZ1biBjbGFpbWFibGUobmZ0X2lkOiBJbnQpOiBJbnQgewogICAgICAgIGxldCB0ZW1wX2luZm86IEluZm8gPSBzZWxmLnN0YWtlX3JlY29yZHMuZ2V0KG5mdF9pZCkhITsKICAgICAgICBsZXQgcmF0aW86IEludCA9IHBvdygxMCwgOSkgKiB0ZW1wX2luZm8ud2VpZ2h0IC8gc2VsZi50b3RhbFdlaWdodDsgLy8gVE9ETwogICAgICAgIHJldHVybiByYXRpbzsKICAgIH0KCiAgICBnZXQgZnVuIHN0YWtlX2RhdGEoKTogU3Rha2VEYXRhIHsKICAgICAgICByZXR1cm4gU3Rha2VEYXRhIHsKICAgICAgICAgICAgdG90YWxXZWlnaHQ6IHNlbGYudG90YWxXZWlnaHQKICAgICAgICB9OwogICAgfQoKICAgIGdldCBmdW4gZ2V0X3VzZXJfbGlzdChfbmZ0SUQ6IEludCk6IEluZm8gewogICAgICAgIHJldHVybiBzZWxmLnN0YWtlX3JlY29yZHMuZ2V0KF9uZnRJRCkhITsKICAgIH0KICAgIAogICAgcmVjZWl2ZSgpewogICAgICAgIC8vIERPTk9USElORwogICAgfQp9CgpzdHJ1Y3QgU3Rha2VEYXRhIHsKICAgIHRvdGFsV2VpZ2h0OiBJbnQ7Cn0="},"compiler":{"name":"tact","version":"1.1.0","parameters":"{\"entrypoint\":\"./sources/contract.tact\",\"options\":{}}"}}